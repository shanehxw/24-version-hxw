### 装甲板识别
## 代码思路
    识别：图像通过预处理后，通过轮廓检测生成两个矩形，通过这两个矩形计算出装甲板的大致轮廓，并且返回装甲板目标:
        1、预处理
        2、滤波
        3、检索轮廓findContours
        4、找到并筛选轮廓minarearect
        5、简单处理得到的矩形（排序等）
        6、合成大矩形（通过minarearect计算斜率和长宽高,进而计算矩形角点位置，并且通过较稳定的矩形中点求得装甲板偏转情况，对大矩形进行调整）求得大矩形角点
    测距：通过pnp算法对矩形角点进行处理，经过代数计算得到距离

## 遇到问题与解决思路
    （09.25）图像绘制函数的使用，总是出现段错误 
        --参数使用错误，并且scalar没有设置为白色，窗口中才会显示不出来轮廓线

    （09.26）感兴趣区域的提取，去除上方灯光的影响 
        --通过对二值化图像设置区域掩码除去

    （09.26）不能单独通过轮廓层次解决，否则黄色小圆点会干扰 
        --通过设置面积阈值排除

    （09.27）在远离情况下，出现中心点较大程度的偏移 
        --因为上方灯光干扰，通过掩码区域扩大解决

    （10.03）在较为平行的时候，装甲板minarearect函数返回的角点顺序不稳定  
        --通过对角点y值排序、对矩形排序处理，判断矩形左右倾斜，让角点稳定

    （10.04）minarearect出来的角点不稳定，需要降抖动 
        --通过中心点斜率和灯条宽高重新确定两个矩形的角点  
        --或者转化为菱形，从菱形得出矩形

    （10.04）通过角度和宽高筛选装甲板时间成本高
        --回用面积阈值
    
## 效果图（图片帧数大概相近）
	/home/hxw/Code/2.4/picture_armour1.jpeg
    /home/hxw/Code/2.4/picture_armour2.jpeg
## 总结
    本次装甲板识别过程较为曲折：
    我首先使用minarearect，通过中心点直接求出中心点，然后使用两个矩形的角点来作为装甲板的角点。首先，minarearect得到的矩形以及矩形内部的角点顺序混乱，需要花费大量经历穷举排序，造成代码难读以及可维护性较差；其次，直接确定的装甲板角点不稳定，对本就环境敏感pnp算法造成了很大干扰;再这，之前的代码仅仅只对于本视频有效，不具有普遍性
    后来：
    1、我先设置各种条件（如面积、长宽匹配度、倾斜匹配度）对minarearect中的可能的装甲板进行筛选和分组，
    2、再对识别出的各组矩形进行合并（合并中可以选择矩形和菱形，矩形开发的较为完善，菱形是后来才开发的，速度更快，个人感觉精度也比矩形高）
    3、合并出的矩形进行修正（虽然代码实现上合并和修正同步进行），通过观察发现minarearect得到的中心点较为稳定，因此通过计算中心点的斜率，对装甲板旋转姿态进行修正，重新计算装甲板四个角点的坐标
    4、利用各组装甲板的中心点以及四个角点的坐标，利用pnp算法，设置中心点作为世界坐标轴原点，得到的平移矩阵中的z值即为装甲板中心距离（装甲板长宽参数随便选了一个数上去，绝对距离可能不太一样）
## 特别说明
    更换模式：在主函数 /home/hxw/Code/2.4/armour_rec.cpp 中可以通过修改 66、75行 函数的最后一个参数来更换矩形-菱形模式
    